{% extends "layout.html" %}

{% block body %}
<html>
<body>
    <h1 class="let_linea">Linea 1</h1>
     <!-- Conectando los resultados que llegan desde emit /read -->
    <p class="let_dir"> Direccion A </p>
    <div id="barra_a">  </div>
    <p class="let_dir"> Direccion B </p>
    <div id="barra_b">  </div>
    <p class="let_dir">Patrocinado por:</p>
    <p><img id="ima_b" src="/static/anuncios.png" width="350" height="100" class="imagen"></p>

    <div class="abajo">
    P1nata Code, CDMX 2018.
    </div>

    <!--   json jquery  -  AJAX -->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>

    <!--Funcion javascript-->
    <script type=text/javascript>
    div = $('<div><img id="ima_a" src="/static/obt.png" width="350" height="100" class="imagen"></div>');
        $('#barra_a').append(div);

    div = $('<div><img id="ima_b" src="/static/obt.png" width="350" height="100" class="imagen"></div>');
        $('#barra_b').append(div);

        $(document).ready(function(){
        // Conectando al servidor
        var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');
        var color;

        // Recibiendo datos del servidor direccion a
        socket.on('update_a', function(msg) {
            color_a = msg.estado

                if ( color_a == 1){
                     document.getElementById('ima_a').src="/static/1.png";
                }
                else if( color_a == 2 ){
                     document.getElementById('ima_a').src="/static/2.png";
                }
                else if ( color_a == 3){
                     document.getElementById('ima_a').src="/static/3.png";
                }
                else if( color_a == 4 ){
                     document.getElementById('ima_a').src="/static/4.png";
                }
                else if ( color_a == 5){
                     document.getElementById('ima_a').src="/static/5.png";
                }
                else if ( color_a == 6){
                     document.getElementById('ima_a').src="/static/6.png";
                }
        });

        // Recibiendo datos del servidor direccion b
        socket.on('update_b', function(msg) {
            color_b = msg.estado

            if ( color_b == 1){
                     document.getElementById('ima_b').src="/static/1.png";
                }
                else if( color_b == 2 ){
                     document.getElementById('ima_b').src="/static/2.png";
                }
                else if ( color_b == 3){
                     document.getElementById('ima_b').src="/static/3.png";
                }
                else if( color_b == 4){
                     document.getElementById('ima_b').src="/static/4.png";
                }
                else if ( color_b == 5){
                     document.getElementById('ima_b').src="/static/5.png";
                }
                else if ( color_b == 6){
                     document.getElementById('ima_b').src="/static/6.png";
                }
        });
    });
    </script>
  </body>
</html>
{% endblock %}